# Flexi-UI ç»„ä»¶æ ·å¼å®ç°è¯¦è§£

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æ Flexi-UI ä¸­å„ä¸ªç»„ä»¶çš„æ ·å¼å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€å®ç°ç»†èŠ‚å’Œæ‰©å±•æ–¹æ³•ã€‚

## ç›®å½•

1. [æ ·å¼æŠ€æœ¯æ ˆ](#æ ·å¼æŠ€æœ¯æ ˆ)
2. [æ ¸å¿ƒç»„ä»¶æ ·å¼åˆ†æ](#æ ¸å¿ƒç»„ä»¶æ ·å¼åˆ†æ)
3. [æ ·å¼æ¨¡å¼å’Œæœ€ä½³å®è·µ](#æ ·å¼æ¨¡å¼å’Œæœ€ä½³å®è·µ)
4. [æ‰©å±•å’Œå®šåˆ¶æŒ‡å—](#æ‰©å±•å’Œå®šåˆ¶æŒ‡å—)
5. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)

## æ ·å¼æŠ€æœ¯æ ˆ

### 1. ä¸»è¦æŠ€æœ¯

#### Emotion CSS-in-JS

```typescript
import styled, { css } from '@emotion/styled';
import { Theme } from '@emotion/react';

// åŸºç¡€æ ·å¼ç»„ä»¶
const StyledComponent = styled.div<{ theme: Theme }>`
  ${({ theme }) => css`
    background-color: ${theme.colors.surface};
    border-radius: ${theme.tokens.radii.md};
  `}
`;
```

#### è®¾è®¡ä»¤ç‰Œç³»ç»Ÿ

```typescript
export const designTokens = {
  colors: {
    primary: { 50: '#eff6ff', 500: '#3b82f6', 900: '#1e3a8a' },
    semantic: {
      success: '#10b981',
      warning: '#f59e0b',
      error: '#ef4444',
      info: '#3b82f6',
    },
  },
  spacing: [0, 4, 8, 12, 16, 24, 32, 48, 64, 96],
  typography: {
    fonts: {
      body: 'Inter, system-ui, -apple-system, sans-serif',
      mono: 'Fira Code, Consolas, monospace',
    },
    sizes: [12, 14, 16, 18, 20, 24, 30, 36, 48, 60, 72],
    weights: { normal: 400, medium: 500, semibold: 600, bold: 700 },
  },
  radii: { none: 0, sm: 4, md: 8, lg: 12, xl: 16, '2xl': 24, full: 9999 },
  shadows: {
    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
    md: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',
    xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1)',
  },
  transitions: { fast: '150ms', normal: '300ms', slow: '500ms' },
};
```

#### ä¸»é¢˜ç³»ç»Ÿ

```typescript
interface Theme {
  tokens: typeof designTokens;
  mode: 'light' | 'dark';
  isDark: boolean;
  colors: {
    background: string;
    surface: string;
    text: { primary: string; secondary: string; disabled: string };
    border: string;
  };
}

// ä¸»é¢˜æä¾›è€…
export const ThemeProvider: React.FC<ThemeProviderProps> = ({
  children,
  mode: controlledMode,
  onModeChange
}) => {
  const [internalMode, setInternalMode] = useState<'light' | 'dark'>('light');
  const mode = controlledMode ?? internalMode;

  const theme = useMemo(() => ({
    tokens: designTokens,
    mode,
    isDark: mode === 'dark',
    colors: {
      background: mode === 'dark' ? designTokens.colors.neutral[900] : '#ffffff',
      surface: mode === 'dark' ? designTokens.colors.neutral[800] : '#ffffff',
      text: {
        primary: mode === 'dark' ? designTokens.colors.neutral[50] : designTokens.colors.neutral[900],
        secondary: mode === 'dark' ? designTokens.colors.neutral[300] : designTokens.colors.neutral[600],
        disabled: mode === 'dark' ? designTokens.colors.neutral[500] : designTokens.colors.neutral[400]
      },
      border: mode === 'dark' ? designTokens.colors.neutral[700] : designTokens.colors.neutral[200]
    }
  }), [mode]);

  return (
    <EmotionThemeProvider theme={theme}>
      <ThemeContext.Provider value={{ theme, mode, toggleMode, setMode }}>
        {children}
      </ThemeContext.Provider>
    </EmotionThemeProvider>
  );
};
```

### 2. è¾…åŠ©æŠ€æœ¯

#### Tailwind CSS

```css
/* index.css */
@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* å…¨å±€æ ·å¼é‡ç½® */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

:root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  color-scheme: light dark;
}
```

#### ä¼ ç»ŸCSS

```css
/* æ»šåŠ¨æ¡æ ·å¼ */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}
```

## æ ¸å¿ƒç»„ä»¶æ ·å¼åˆ†æ

### 1. Button ç»„ä»¶

#### æ ·å¼æ¶æ„

```typescript
// Button.styled.ts
import styled, { css } from '@emotion/styled';
import type { Theme } from '../theme/types';

// åŸºç¡€æ ·å¼
const baseButtonStyles = (theme: Theme) => css`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: ${theme.tokens.radii.md}px;
  font-family: ${theme.tokens.typography.fonts.body};
  font-weight: ${theme.tokens.typography.weights.medium};
  cursor: pointer;
  transition: all ${theme.tokens.transitions.fast};
  text-decoration: none;

  &:disabled {
    cursor: not-allowed;
    opacity: 0.6;
  }

  &:focus-visible {
    outline: 2px solid ${theme.tokens.colors.primary[500]};
    outline-offset: 2px;
  }
`;

// å°ºå¯¸å˜ä½“
const sizeStyles = (theme: Theme) => ({
  sm: css`
    padding: ${theme.tokens.spacing[1]}px ${theme.tokens.spacing[3]}px;
    font-size: ${theme.tokens.typography.sizes[0]}px;
    min-height: 32px;
  `,
  md: css`
    padding: ${theme.tokens.spacing[2]}px ${theme.tokens.spacing[4]}px;
    font-size: ${theme.tokens.typography.sizes[1]}px;
    min-height: 40px;
  `,
  lg: css`
    padding: ${theme.tokens.spacing[3]}px ${theme.tokens.spacing[6]}px;
    font-size: ${theme.tokens.typography.sizes[2]}px;
    min-height: 48px;
  `,
});

// é¢œè‰²å˜ä½“
const variantStyles = (theme: Theme) => ({
  primary: css`
    background-color: ${theme.tokens.colors.primary[500]};
    color: white;

    &:hover:not(:disabled) {
      background-color: ${theme.tokens.colors.primary[600]};
    }

    &:active:not(:disabled) {
      background-color: ${theme.tokens.colors.primary[700]};
    }
  `,

  secondary: css`
    background-color: ${theme.tokens.colors.secondary[500]};
    color: white;

    &:hover:not(:disabled) {
      background-color: ${theme.tokens.colors.secondary[600]};
    }
  `,

  outline: css`
    background-color: transparent;
    border: 1px solid ${theme.tokens.colors.primary[500]};
    color: ${theme.tokens.colors.primary[500]};

    &:hover:not(:disabled) {
      background-color: ${theme.tokens.colors.primary[50]};
    }
  `,

  ghost: css`
    background-color: transparent;
    color: ${theme.tokens.colors.primary[500]};

    &:hover:not(:disabled) {
      background-color: ${theme.tokens.colors.primary[50]};
    }
  `,
});

// ä¸»æ ·å¼ç»„ä»¶
export interface StyledButtonProps {
  variant: 'primary' | 'secondary' | 'outline' | 'ghost';
  size: 'sm' | 'md' | 'lg';
  fullWidth?: boolean;
  loading?: boolean;
}

export const StyledButton = styled.button<StyledButtonProps>`
  ${({ theme }) => baseButtonStyles(theme)}
  ${({ theme, variant }) => variantStyles(theme)[variant]}
  ${({ theme, size }) => sizeStyles(theme)[size]}
  
  ${({ fullWidth }) =>
    fullWidth &&
    css`
      width: 100%;
    `}
  
  ${({ loading }) =>
    loading &&
    css`
      position: relative;
      color: transparent;

      &::after {
        content: '';
        position: absolute;
        width: 16px;
        height: 16px;
        border: 2px solid transparent;
        border-top: 2px solid currentColor;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
    `}
`;
```

#### æ‰©å±•æ€§ç‰¹ç‚¹

- âœ… **å˜ä½“ç³»ç»Ÿå®Œæ•´**: 4ç§è§†è§‰å˜ä½“ï¼Œ3ç§å°ºå¯¸
- âœ… **çŠ¶æ€ç®¡ç†ä¸°å¯Œ**: hoverã€activeã€disabledã€loadingã€focus
- âœ… **ä¸»é¢˜æ„ŸçŸ¥**: å®Œå…¨åŸºäºè®¾è®¡ä»¤ç‰Œ
- âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptæ¥å£
- âœ… **å¯è®¿é—®æ€§**: æ”¯æŒfocus-visibleå’Œé”®ç›˜å¯¼èˆª

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
// åŸºç¡€ä½¿ç”¨
<Button variant="primary" size="md">
  Click me
</Button>

// æ‰©å±•æ ·å¼
const CustomButton = styled(Button)`
  background: linear-gradient(45deg, #fe6b8b 30%, #ff8e53 90%);
  box-shadow: 0 3px 5px 2px rgba(255, 105, 135, .3);
`;

// æ ·å¼è¦†ç›–
<Button
  variant="primary"
  css={css`
    border-radius: 20px;
    text-transform: uppercase;
  `}
>
  Custom Style
</Button>
```

### 2. DataTable ç»„ä»¶

#### å¤æ‚æ ·å¼æ¶æ„

```typescript
// DataTable.styled.ts
import styled, { css } from '@emotion/styled';
import type { Theme } from '../theme/types';

// è¡¨æ ¼å®¹å™¨
export const TableContainer = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    background-color: ${theme.colors.surface};
    border-radius: ${theme.tokens.radii.lg}px;
    box-shadow: ${theme.tokens.shadows.sm};
    border: 1px solid ${theme.colors.border};
    overflow: hidden;
  `}
`;

// è¡¨æ ¼å¤´éƒ¨
export const TableHeader = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    background-color: ${theme.isDark
      ? theme.tokens.colors.neutral[800]
      : theme.tokens.colors.neutral[50]};
    border-bottom: 1px solid ${theme.colors.border};
  `}
`;

// è¡¨æ ¼è¡Œ
export const TableRow = styled.div<{
  theme?: Theme;
  isSelected?: boolean;
  isHovered?: boolean;
}>`
  ${({ theme, isSelected, isHovered }) => css`
    display: flex;
    border-bottom: 1px solid ${theme.colors.border};
    transition: background-color ${theme.tokens.transitions.fast};

    ${isSelected &&
    css`
      background-color: ${theme.isDark
        ? theme.tokens.colors.primary[900] + '33'
        : theme.tokens.colors.primary[50]};
    `}

    ${isHovered &&
    css`
      background-color: ${theme.isDark
        ? theme.tokens.colors.neutral[800]
        : theme.tokens.colors.neutral[50]};
    `}
    
    &:last-child {
      border-bottom: none;
    }
  `}
`;

// è¡¨æ ¼å•å…ƒæ ¼
export const TableCell = styled.div<{
  theme?: Theme;
  width?: number;
  align?: 'left' | 'center' | 'right';
}>`
  ${({ theme, width, align = 'left' }) => css`
    padding: ${theme.tokens.spacing[4]}px ${theme.tokens.spacing[6]}px;
    flex: ${width ? `0 0 ${width}px` : '1'};
    text-align: ${align};
    color: ${theme.colors.text.primary};
    font-size: ${theme.tokens.typography.sizes[1]}px;
    line-height: ${theme.tokens.typography.lineHeights.normal};

    &:first-of-type {
      padding-left: ${theme.tokens.spacing[6]}px;
    }

    &:last-of-type {
      padding-right: ${theme.tokens.spacing[6]}px;
    }
  `}
`;

// è¡¨å¤´å•å…ƒæ ¼
export const HeaderCell = styled(TableCell)<{
  sortable?: boolean;
  sortDirection?: 'asc' | 'desc' | null;
}>`
  ${({ theme, sortable, sortDirection }) => css`
    font-weight: ${theme.tokens.typography.weights.semibold};
    color: ${theme.colors.text.secondary};
    user-select: none;

    ${sortable &&
    css`
      cursor: pointer;
      position: relative;

      &:hover {
        color: ${theme.colors.text.primary};
      }

      &::after {
        content: '';
        position: absolute;
        right: ${theme.tokens.spacing[2]}px;
        top: 50%;
        transform: translateY(-50%);
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        opacity: 0.3;

        ${sortDirection === 'asc' &&
        css`
          border-bottom: 6px solid currentColor;
          opacity: 1;
        `}

        ${sortDirection === 'desc' &&
        css`
          border-top: 6px solid currentColor;
          opacity: 1;
        `}
        
        ${!sortDirection &&
        css`
          border-bottom: 6px solid currentColor;
        `}
      }
    `}
  `}
`;

// åˆ†é¡µå®¹å™¨
export const PaginationContainer = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: ${theme.tokens.spacing[4]}px ${theme.tokens.spacing[6]}px;
    border-top: 1px solid ${theme.colors.border};
    background-color: ${theme.colors.surface};
  `}
`;

// åˆ†é¡µæŒ‰é’®
export const PaginationButton = styled.button<{
  theme?: Theme;
  active?: boolean;
  disabled?: boolean;
}>`
  ${({ theme, active, disabled }) => css`
    padding: ${theme.tokens.spacing[2]}px ${theme.tokens.spacing[3]}px;
    border: 1px solid ${theme.colors.border};
    background-color: ${active
      ? theme.tokens.colors.primary[500]
      : theme.colors.surface};
    color: ${active ? 'white' : theme.colors.text.primary};
    border-radius: ${theme.tokens.radii.sm}px;
    cursor: ${disabled ? 'not-allowed' : 'pointer'};
    transition: all ${theme.tokens.transitions.fast};

    &:hover:not(:disabled) {
      background-color: ${active
        ? theme.tokens.colors.primary[600]
        : theme.isDark
          ? theme.tokens.colors.neutral[700]
          : theme.tokens.colors.neutral[100]};
    }

    ${disabled &&
    css`
      opacity: 0.5;
    `}
  `}
`;

// åŠ è½½çŠ¶æ€
export const LoadingOverlay = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: ${theme.colors.surface}CC;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: ${theme.tokens.zIndex.modal};
  `}
`;

// ç©ºçŠ¶æ€
export const EmptyState = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    padding: ${theme.tokens.spacing[8]}px;
    text-align: center;
    color: ${theme.colors.text.secondary};

    .empty-icon {
      font-size: ${theme.tokens.typography.sizes[6]}px;
      margin-bottom: ${theme.tokens.spacing[4]}px;
      opacity: 0.5;
    }

    .empty-title {
      font-size: ${theme.tokens.typography.sizes[3]}px;
      font-weight: ${theme.tokens.typography.weights.semibold};
      margin-bottom: ${theme.tokens.spacing[2]}px;
      color: ${theme.colors.text.primary};
    }

    .empty-description {
      font-size: ${theme.tokens.typography.sizes[1]}px;
      line-height: ${theme.tokens.typography.lineHeights.relaxed};
    }
  `}
`;
```

#### æ‰©å±•æ€§ç‰¹ç‚¹

- âœ… **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªè¡¨æ ¼éƒ¨åˆ†éƒ½æœ‰ç‹¬ç«‹çš„æ ·å¼ç»„ä»¶
- âœ… **çŠ¶æ€ä¸°å¯Œ**: æ”¯æŒé€‰ä¸­ã€æ‚¬åœã€æ’åºã€åŠ è½½ç­‰çŠ¶æ€
- âœ… **å“åº”å¼å‹å¥½**: çµæ´»çš„åˆ—å®½å’Œå¯¹é½æ–¹å¼
- âœ… **ä¸»é¢˜æ·±åº¦é›†æˆ**: å®Œå…¨æ”¯æŒæ˜æš—ä¸»é¢˜
- âš ï¸ **å¤æ‚åº¦è¾ƒé«˜**: æ ·å¼ç»„ä»¶æ•°é‡å¤šï¼Œç»´æŠ¤æˆæœ¬é«˜
- âš ï¸ **æ€§èƒ½è€ƒè™‘**: å¤§é‡æ¡ä»¶æ ·å¼å¯èƒ½å½±å“æ¸²æŸ“æ€§èƒ½

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
// åŸºç¡€è¡¨æ ¼
<TableContainer>
  <TableHeader>
    <TableRow>
      <HeaderCell sortable sortDirection="asc">Name</HeaderCell>
      <HeaderCell width={120} align="center">Status</HeaderCell>
      <HeaderCell width={100} align="right">Actions</HeaderCell>
    </TableRow>
  </TableHeader>

  {data.map(row => (
    <TableRow key={row.id} isSelected={selectedIds.includes(row.id)}>
      <TableCell>{row.name}</TableCell>
      <TableCell width={120} align="center">
        <StatusBadge status={row.status} />
      </TableCell>
      <TableCell width={100} align="right">
        <ActionButtons />
      </TableCell>
    </TableRow>
  ))}
</TableContainer>

// è‡ªå®šä¹‰æ ·å¼æ‰©å±•
const CustomTable = styled(TableContainer)`
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
`;

const StripedRow = styled(TableRow)`
  &:nth-of-type(even) {
    background-color: ${({ theme }) =>
      theme.isDark
        ? theme.tokens.colors.neutral[900]
        : theme.tokens.colors.neutral[25]
    };
  }
`;
```

### 3. FileUploader ç»„ä»¶

#### é«˜åº¦äº¤äº’çš„æ ·å¼ç³»ç»Ÿ

```typescript
// FileUploader.styled.ts
import styled, { css, keyframes } from '@emotion/styled';
import type { Theme } from '../theme/types';

// åŠ¨ç”»å®šä¹‰
const pulse = keyframes`
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
`;

const slideIn = keyframes`
  from { transform: translateY(-10px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
`;

const progressAnimation = keyframes`
  0% { transform: translateX(-100%); }
  100% { transform: translateX(0); }
`;

// ä¸»å®¹å™¨
export const Container = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    font-family: ${theme.tokens.typography.fonts.body};
    color: ${theme.colors.text.primary};
  `}
`;

// æ‹–æ‹½åŒºåŸŸ
export const DropZone = styled.div<{
  theme?: Theme;
  isDragging: boolean;
  darkMode: boolean;
  disabled?: boolean;
}>`
  ${({ theme, isDragging, darkMode, disabled }) => css`
    border: 2px dashed
      ${isDragging ? theme.tokens.colors.primary[400] : theme.colors.border};
    border-radius: ${theme.tokens.radii.lg}px;
    padding: ${theme.tokens.spacing[8]}px;
    text-align: center;
    cursor: ${disabled ? 'not-allowed' : 'pointer'};
    transition: all ${theme.tokens.transitions.normal};
    position: relative;
    background-color: ${isDragging
      ? darkMode
        ? theme.tokens.colors.primary[900] + '33'
        : theme.tokens.colors.primary[50]
      : 'transparent'};

    ${disabled &&
    css`
      opacity: 0.6;
      background-color: ${darkMode
        ? theme.tokens.colors.neutral[800]
        : theme.tokens.colors.neutral[100]};
    `}

    &:hover:not([disabled]) {
      border-color: ${theme.tokens.colors.primary[400]};
      background-color: ${darkMode
        ? theme.tokens.colors.primary[900] + '1A'
        : theme.tokens.colors.primary[25]};
    }
  `}
`;

// æ‹–æ‹½è¦†ç›–å±‚
export const DropZoneOverlay = styled.div<{
  theme?: Theme;
  isDragging: boolean;
}>`
  ${({ theme, isDragging }) => css`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: ${theme.tokens.colors.primary[500]}1A;
    border-radius: ${theme.tokens.radii.lg}px;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: ${isDragging ? 1 : 0};
    transition: opacity ${theme.tokens.transitions.fast};
    pointer-events: none;

    &::before {
      content: 'ğŸ“';
      font-size: ${theme.tokens.typography.sizes[6]}px;
      animation: ${pulse} 1s infinite;
    }
  `}
`;

// ä¸Šä¼ å›¾æ ‡
export const UploadIcon = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    font-size: ${theme.tokens.typography.sizes[6]}px;
    margin-bottom: ${theme.tokens.spacing[4]}px;
    color: ${theme.colors.text.secondary};
  `}
`;

// ä¸»è¦æ–‡æœ¬
export const PrimaryText = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    font-size: ${theme.tokens.typography.sizes[3]}px;
    font-weight: ${theme.tokens.typography.weights.semibold};
    margin-bottom: ${theme.tokens.spacing[2]}px;
    color: ${theme.colors.text.primary};
  `}
`;

// æ¬¡è¦æ–‡æœ¬
export const SecondaryText = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    font-size: ${theme.tokens.typography.sizes[1]}px;
    color: ${theme.colors.text.secondary};
    line-height: ${theme.tokens.typography.lineHeights.relaxed};
  `}
`;

// æ–‡ä»¶åˆ—è¡¨
export const FileList = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    margin-top: ${theme.tokens.spacing[6]}px;
    border: 1px solid ${theme.colors.border};
    border-radius: ${theme.tokens.radii.lg}px;
    background-color: ${theme.colors.surface};
    overflow: hidden;
  `}
`;

// æ–‡ä»¶åˆ—è¡¨å¤´éƒ¨
export const FileListHeader = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    padding: ${theme.tokens.spacing[4]}px ${theme.tokens.spacing[6]}px;
    background-color: ${theme.isDark
      ? theme.tokens.colors.neutral[800]
      : theme.tokens.colors.neutral[50]};
    border-bottom: 1px solid ${theme.colors.border};
    font-weight: ${theme.tokens.typography.weights.semibold};
    font-size: ${theme.tokens.typography.sizes[1]}px;
    color: ${theme.colors.text.secondary};
  `}
`;

// æ–‡ä»¶é¡¹
export const FileItem = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    padding: ${theme.tokens.spacing[4]}px ${theme.tokens.spacing[6]}px;
    border-bottom: 1px solid ${theme.colors.border};
    animation: ${slideIn} ${theme.tokens.transitions.normal};

    &:last-child {
      border-bottom: none;
    }

    &:hover {
      background-color: ${theme.isDark
        ? theme.tokens.colors.neutral[800]
        : theme.tokens.colors.neutral[50]};
    }
  `}
`;

// æ–‡ä»¶ä¿¡æ¯
export const FileInfo = styled.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`;

// æ–‡ä»¶å¤´éƒ¨ä¿¡æ¯
export const FileHeader = styled.div`
  display: flex;
  align-items: center;
  flex: 1;
`;

// æ–‡ä»¶å›¾æ ‡
export const FileIcon = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    width: 40px;
    height: 40px;
    border-radius: ${theme.tokens.radii.md}px;
    background-color: ${theme.tokens.colors.primary[100]};
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: ${theme.tokens.spacing[4]}px;
    font-size: ${theme.tokens.typography.sizes[3]}px;
    color: ${theme.tokens.colors.primary[600]};
  `}
`;

// æ–‡ä»¶å
export const FileName = styled.span<{ theme?: Theme }>`
  ${({ theme }) => css`
    font-weight: ${theme.tokens.typography.weights.medium};
    color: ${theme.colors.text.primary};
    font-size: ${theme.tokens.typography.sizes[1]}px;
  `}
`;

// æ–‡ä»¶å¤§å°
export const FileSize = styled.span<{ theme?: Theme }>`
  ${({ theme }) => css`
    color: ${theme.colors.text.secondary};
    font-size: ${theme.tokens.typography.sizes[0]}px;
    margin-left: ${theme.tokens.spacing[2]}px;
  `}
`;

// çŠ¶æ€å¾½ç« 
export const StatusBadge = styled.span<{
  theme?: Theme;
  status: 'ready' | 'uploading' | 'success' | 'error' | 'paused';
  darkMode: boolean;
}>`
  ${({ theme, status, darkMode }) => css`
    padding: ${theme.tokens.spacing[1]}px ${theme.tokens.spacing[3]}px;
    border-radius: ${theme.tokens.radii.full}px;
    font-size: ${theme.tokens.typography.sizes[0]}px;
    font-weight: ${theme.tokens.typography.weights.medium};
    text-transform: uppercase;
    letter-spacing: 0.5px;

    ${status === 'ready' &&
    css`
      background-color: ${darkMode
        ? theme.tokens.colors.neutral[700]
        : theme.tokens.colors.neutral[200]};
      color: ${theme.colors.text.secondary};
    `}

    ${status === 'uploading' &&
    css`
      background-color: ${theme.tokens.colors.primary[100]};
      color: ${theme.tokens.colors.primary[700]};
      animation: ${pulse} 2s infinite;
    `}
    
    ${status === 'success' &&
    css`
      background-color: ${theme.tokens.colors.green[100]};
      color: ${theme.tokens.colors.green[700]};
    `}
    
    ${status === 'error' &&
    css`
      background-color: ${theme.tokens.colors.red[100]};
      color: ${theme.tokens.colors.red[700]};
    `}
    
    ${status === 'paused' &&
    css`
      background-color: ${theme.tokens.colors.orange[100]};
      color: ${theme.tokens.colors.orange[700]};
    `}
  `}
`;

// è¿›åº¦æ¡å®¹å™¨
export const ProgressContainer = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    margin-top: ${theme.tokens.spacing[3]}px;
    background-color: ${theme.isDark
      ? theme.tokens.colors.neutral[700]
      : theme.tokens.colors.neutral[200]};
    border-radius: ${theme.tokens.radii.full}px;
    height: 6px;
    overflow: hidden;
  `}
`;

// è¿›åº¦æ¡
export const ProgressBar = styled.div<{
  theme?: Theme;
  progress: number;
  status: string;
}>`
  ${({ theme, progress, status }) => css`
    height: 100%;
    border-radius: ${theme.tokens.radii.full}px;
    transition: width ${theme.tokens.transitions.normal};
    width: ${progress}%;

    ${status === 'uploading' &&
    css`
      background: linear-gradient(
        90deg,
        ${theme.tokens.colors.primary[400]},
        ${theme.tokens.colors.primary[600]},
        ${theme.tokens.colors.primary[400]}
      );
      background-size: 200% 100%;
      animation: ${progressAnimation} 2s linear infinite;
    `}

    ${status === 'success' &&
    css`
      background-color: ${theme.tokens.colors.green[500]};
    `}
    
    ${status === 'error' &&
    css`
      background-color: ${theme.tokens.colors.red[500]};
    `}
    
    ${status === 'paused' &&
    css`
      background-color: ${theme.tokens.colors.orange[500]};
    `}
  `}
`;

// æ“ä½œæŒ‰é’®ç»„
export const ActionButtons = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    display: flex;
    gap: ${theme.tokens.spacing[2]}px;
    margin-left: ${theme.tokens.spacing[4]}px;
  `}
`;

// æ“ä½œæŒ‰é’®
export const ActionButton = styled.button<{
  theme?: Theme;
  variant?: 'primary' | 'secondary' | 'danger';
}>`
  ${({ theme, variant = 'secondary' }) => css`
    padding: ${theme.tokens.spacing[1]}px ${theme.tokens.spacing[2]}px;
    border: none;
    border-radius: ${theme.tokens.radii.sm}px;
    font-size: ${theme.tokens.typography.sizes[0]}px;
    cursor: pointer;
    transition: all ${theme.tokens.transitions.fast};

    ${variant === 'primary' &&
    css`
      background-color: ${theme.tokens.colors.primary[500]};
      color: white;

      &:hover {
        background-color: ${theme.tokens.colors.primary[600]};
      }
    `}

    ${variant === 'secondary' &&
    css`
      background-color: ${theme.isDark
        ? theme.tokens.colors.neutral[700]
        : theme.tokens.colors.neutral[200]};
      color: ${theme.colors.text.primary};

      &:hover {
        background-color: ${theme.isDark
          ? theme.tokens.colors.neutral[600]
          : theme.tokens.colors.neutral[300]};
      }
    `}
    
    ${variant === 'danger' &&
    css`
      background-color: ${theme.tokens.colors.red[500]};
      color: white;

      &:hover {
        background-color: ${theme.tokens.colors.red[600]};
      }
    `}
  `}
`;
```

#### æ‰©å±•æ€§ç‰¹ç‚¹

- âœ… **çŠ¶æ€ä¸°å¯Œ**: æ”¯æŒæ‹–æ‹½ã€ä¸Šä¼ ã€æˆåŠŸã€é”™è¯¯ã€æš‚åœç­‰å¤šç§çŠ¶æ€
- âœ… **åŠ¨ç”»ä¸°å¯Œ**: åŒ…å«è„‰å†²ã€æ»‘å…¥ã€è¿›åº¦ç­‰å¤šç§åŠ¨ç”»æ•ˆæœ
- âœ… **äº¤äº’å®Œæ•´**: å®Œæ•´çš„æ‹–æ‹½ä¸Šä¼ äº¤äº’ä½“éªŒ
- âœ… **è§†è§‰åé¦ˆ**: ä¸°å¯Œçš„è§†è§‰çŠ¶æ€åé¦ˆ
- âš ï¸ **å¤æ‚åº¦æé«˜**: æ ·å¼ç»„ä»¶æ•°é‡å¤šï¼Œé€»è¾‘å¤æ‚
- âš ï¸ **ç»´æŠ¤æˆæœ¬é«˜**: å¤§é‡æ¡ä»¶æ ·å¼å’ŒåŠ¨ç”»é€»è¾‘

### 4. VirtualList ç»„ä»¶

#### æ€§èƒ½ä¼˜åŒ–çš„æ ·å¼å®ç°

```typescript
// VirtualList.styled.ts
import styled, { css } from '@emotion/styled';
import type { Theme } from '../theme/types';

// è™šæ‹Ÿåˆ—è¡¨å®¹å™¨
export const VirtualListContainer = styled.div<{
  containerHeight: number;
  theme?: Theme;
}>`
  ${({ theme, containerHeight }) => css`
    height: ${containerHeight}px;
    overflow-y: auto;
    background-color: ${theme.colors.background};
    border: 1px solid ${theme.colors.border};
    border-radius: ${theme.tokens.radii.lg}px;

    /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
    &::-webkit-scrollbar {
      width: 8px;
    }

    &::-webkit-scrollbar-track {
      background: ${theme.isDark
        ? theme.tokens.colors.neutral[800]
        : theme.tokens.colors.neutral[100]};
      border-radius: 4px;
    }

    &::-webkit-scrollbar-thumb {
      background: ${theme.isDark
        ? theme.tokens.colors.neutral[600]
        : theme.tokens.colors.neutral[400]};
      border-radius: 4px;

      &:hover {
        background: ${theme.isDark
          ? theme.tokens.colors.neutral[500]
          : theme.tokens.colors.neutral[500]};
      }
    }

    /* Firefox æ»šåŠ¨æ¡æ ·å¼ */
    scrollbar-width: thin;
    scrollbar-color: ${theme.isDark
      ? `${theme.tokens.colors.neutral[600]} ${theme.tokens.colors.neutral[800]}`
      : `${theme.tokens.colors.neutral[400]} ${theme.tokens.colors.neutral[100]}`};
  `}
`;

// è™šæ‹Ÿåˆ—è¡¨å†…å®¹
export const VirtualListContent = styled.div<{
  totalHeight: number;
  theme?: Theme;
}>`
  ${({ totalHeight }) => css`
    position: relative;
    height: ${totalHeight}px;
  `}
`;

// å¯è§åŒºåŸŸ
export const VisibleArea = styled.div<{
  offsetTop: number;
  theme?: Theme;
}>`
  ${({ offsetTop }) => css`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    transform: translateY(${offsetTop}px);
  `}
`;

// è™šæ‹Ÿåˆ—è¡¨é¡¹
export const VirtualListItem = styled.div<{
  theme?: Theme;
  isSelected?: boolean;
  isHovered?: boolean;
}>`
  ${({ theme, isSelected, isHovered }) => css`
    padding: ${theme.tokens.spacing[4]}px ${theme.tokens.spacing[6]}px;
    border-bottom: 1px solid ${theme.colors.border};
    background-color: ${theme.colors.surface};
    color: ${theme.colors.text.primary};
    font-size: ${theme.tokens.typography.sizes[1]}px;
    line-height: ${theme.tokens.typography.lineHeights.normal};
    cursor: pointer;
    transition: background-color ${theme.tokens.transitions.fast};

    ${isSelected &&
    css`
      background-color: ${theme.isDark
        ? theme.tokens.colors.primary[900] + '66'
        : theme.tokens.colors.primary[100]};
      border-left: 3px solid ${theme.tokens.colors.primary[500]};
    `}

    ${isHovered &&
    !isSelected &&
    css`
      background-color: ${theme.isDark
        ? theme.tokens.colors.neutral[800]
        : theme.tokens.colors.neutral[50]};
    `}
    
    &:last-child {
      border-bottom: none;
    }

    &:focus-visible {
      outline: 2px solid ${theme.tokens.colors.primary[500]};
      outline-offset: -2px;
    }
  `}
`;

// åŠ è½½å®¹å™¨
export const LoadingContainer = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    display: flex;
    align-items: center;
    justify-content: center;
    padding: ${theme.tokens.spacing[8]}px;
    color: ${theme.colors.text.secondary};
    font-size: ${theme.tokens.typography.sizes[1]}px;

    .loading-spinner {
      margin-right: ${theme.tokens.spacing[3]}px;
      animation: spin 1s linear infinite;
    }
  `}
`;

// ç©ºçŠ¶æ€
export const EmptyState = styled.div<{ theme?: Theme }>`
  ${({ theme }) => css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: ${theme.tokens.spacing[8]}px;
    color: ${theme.colors.text.secondary};
    text-align: center;

    .empty-icon {
      font-size: ${theme.tokens.typography.sizes[6]}px;
      margin-bottom: ${theme.tokens.spacing[4]}px;
      opacity: 0.5;
    }

    .empty-title {
      font-size: ${theme.tokens.typography.sizes[3]}px;
      font-weight: ${theme.tokens.typography.weights.semibold};
      margin-bottom: ${theme.tokens.spacing[2]}px;
      color: ${theme.colors.text.primary};
    }

    .empty-description {
      font-size: ${theme.tokens.typography.sizes[1]}px;
      line-height: ${theme.tokens.typography.lineHeights.relaxed};
      max-width: 300px;
    }
  `}
`;
```

#### æ‰©å±•æ€§ç‰¹ç‚¹

- âœ… **æ€§èƒ½ä¼˜åŒ–**: æ ·å¼è®¡ç®—ä¼˜åŒ–ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- âœ… **æ»šåŠ¨æ¡å®šåˆ¶**: å®Œæ•´çš„è·¨æµè§ˆå™¨æ»šåŠ¨æ¡æ ·å¼
- âœ… **çŠ¶æ€ç®¡ç†**: æ”¯æŒé€‰ä¸­ã€æ‚¬åœã€åŠ è½½ç­‰çŠ¶æ€
- âœ… **å¯è®¿é—®æ€§**: æ”¯æŒé”®ç›˜å¯¼èˆªå’Œç„¦ç‚¹ç®¡ç†
- âœ… **ç®€æ´è®¾è®¡**: ç›¸å¯¹ç®€å•æ¸…æ™°çš„æ ·å¼ç»“æ„

## æ ·å¼æ¨¡å¼å’Œæœ€ä½³å®è·µ

### 1. æ ·å¼ç»„ç»‡æ¨¡å¼

#### æ¨¡å—åŒ–æ ·å¼ç»„ä»¶

```typescript
// æ¨èï¼šæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡æ ·å¼ç»„ä»¶
// Button/Button.styled.ts
export const ButtonContainer = styled.button`...`;
export const ButtonIcon = styled.span`...`;
export const ButtonSpinner = styled.div`...`;

// DataTable/DataTable.styled.ts
export const TableContainer = styled.div`...`;
export const TableHeader = styled.div`...`;
export const TableRow = styled.div`...`;
export const TableCell = styled.div`...`;
```

#### æ ·å¼å·¥å‚æ¨¡å¼

```typescript
// åˆ›å»ºå¯å¤ç”¨çš„æ ·å¼å·¥å‚
export const createButtonStyles = (theme: Theme) => ({
  base: css`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: none;
    border-radius: ${theme.tokens.radii.md}px;
    font-family: ${theme.tokens.typography.fonts.body};
    cursor: pointer;
    transition: all ${theme.tokens.transitions.fast};
  `,

  variants: {
    primary: css`
      background-color: ${theme.tokens.colors.primary[500]};
      color: white;
    `,
    secondary: css`
      background-color: ${theme.tokens.colors.secondary[500]};
      color: white;
    `,
  },

  sizes: {
    sm: css`
      padding: ${theme.tokens.spacing[1]}px ${theme.tokens.spacing[3]}px;
      font-size: ${theme.tokens.typography.sizes[0]}px;
    `,
    md: css`
      padding: ${theme.tokens.spacing[2]}px ${theme.tokens.spacing[4]}px;
      font-size: ${theme.tokens.typography.sizes[1]}px;
    `,
  },
});

// ä½¿ç”¨æ ·å¼å·¥å‚
export const StyledButton = styled.button<ButtonProps>`
  ${({ theme }) => {
    const styles = createButtonStyles(theme);
    return [styles.base, styles.variants[variant], styles.sizes[size]];
  }}
`;
```

#### æ ·å¼æ··å…¥æ¨¡å¼

```typescript
// åˆ›å»ºé€šç”¨æ ·å¼æ··å…¥
export const mixins = {
  // å¸ƒå±€æ··å…¥
  flexCenter: css`
    display: flex;
    align-items: center;
    justify-content: center;
  `,

  flexBetween: css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `,

  // è§†è§‰æ··å…¥
  cardStyle: (theme: Theme) => css`
    background-color: ${theme.colors.surface};
    border-radius: ${theme.tokens.radii.lg}px;
    box-shadow: ${theme.tokens.shadows.sm};
    border: 1px solid ${theme.colors.border};
  `,

  // äº¤äº’æ··å…¥
  focusRing: (theme: Theme) => css`
    &:focus-visible {
      outline: 2px solid ${theme.tokens.colors.primary[500]};
      outline-offset: 2px;
    }
  `,

  hoverElevation: (theme: Theme) => css`
    transition: box-shadow ${theme.tokens.transitions.fast};

    &:hover {
      box-shadow: ${theme.tokens.shadows.md};
    }
  `,

  // çŠ¶æ€æ··å…¥
  disabledState: css`
    &:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      pointer-events: none;
    }
  `,

  loadingState: css`
    position: relative;

    &[data-loading='true'] {
      color: transparent;

      &::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 16px;
        height: 16px;
        border: 2px solid transparent;
        border-top: 2px solid currentColor;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
    }
  `,
};

// ä½¿ç”¨æ··å…¥
export const Card = styled.div`
  ${({ theme }) => mixins.cardStyle(theme)}
  ${({ theme }) => mixins.hoverElevation(theme)}
`;

export const Button = styled.button`
  ${mixins.flexCenter}
  ${({ theme }) => mixins.focusRing(theme)}
  ${mixins.disabledState}
  ${mixins.loadingState}
`;
```

### 2. ä¸»é¢˜ä½¿ç”¨æ¨¡å¼

#### ä¸»é¢˜ä»¤ç‰Œä¼˜å…ˆ

```typescript
// âœ… æ¨èï¼šä¼˜å…ˆä½¿ç”¨ä¸»é¢˜ä»¤ç‰Œ
const styles = css`
  color: ${theme.tokens.colors.primary[500]};
  padding: ${theme.tokens.spacing[4]}px;
  font-size: ${theme.tokens.typography.sizes[2]}px;
  border-radius: ${theme.tokens.radii.md}px;
  box-shadow: ${theme.tokens.shadows.sm};
  transition: all ${theme.tokens.transitions.fast};
`;

// âŒ é¿å…ï¼šç¡¬ç¼–ç å€¼
const styles = css`
  color: #3b82f6;
  padding: 16px;
  font-size: 16px;
  border-radius: 8px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  transition: all 150ms;
`;
```

#### è¯­ä¹‰åŒ–é¢œè‰²ä½¿ç”¨

```typescript
// âœ… æ¨èï¼šä½¿ç”¨è¯­ä¹‰åŒ–é¢œè‰²
const styles = css`
  background-color: ${theme.colors.surface};
  color: ${theme.colors.text.primary};
  border-color: ${theme.colors.border};

  /* çŠ¶æ€é¢œè‰² */
  .success {
    color: ${theme.tokens.colors.semantic.success};
  }
  .warning {
    color: ${theme.tokens.colors.semantic.warning};
  }
  .error {
    color: ${theme.tokens.colors.semantic.error};
  }
  .info {
    color: ${theme.tokens.colors.semantic.info};
  }
`;

// âŒ é¿å…ï¼šç›´æ¥ä½¿ç”¨è‰²é˜¶
const styles = css`
  background-color: ${theme.tokens.colors.neutral[50]};
  color: ${theme.tokens.colors.neutral[900]};
`;
```

#### ä¸»é¢˜æ„ŸçŸ¥æ ·å¼

```typescript
// ä¸»é¢˜æ„ŸçŸ¥çš„æ¡ä»¶æ ·å¼
const createThemeAwareStyles = (theme: Theme) => css`
  background-color: ${theme.colors.surface};
  color: ${theme.colors.text.primary};

  /* æ ¹æ®ä¸»é¢˜æ¨¡å¼è°ƒæ•´æ ·å¼ */
  ${theme.isDark &&
  css`
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  `}

  ${!theme.isDark &&
  css`
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  `}
  
  /* å“åº”å¼ä¸»é¢˜è°ƒæ•´ */
  @media (prefers-color-scheme: dark) {
    ${!theme.mode &&
    css`
      background-color: ${theme.tokens.colors.neutral[800]};
      color: ${theme.tokens.colors.neutral[100]};
    `}
  }
`;
```

### 3. æ€§èƒ½ä¼˜åŒ–æ¨¡å¼

#### æ ·å¼ç¼“å­˜

```typescript
// æ ·å¼ç¼“å­˜å·¥å…·
const styleCache = new Map<string, SerializedStyles>();

export const createCachedStyles = (
  key: string,
  styleFactory: () => SerializedStyles
): SerializedStyles => {
  if (!styleCache.has(key)) {
    styleCache.set(key, styleFactory());
  }
  return styleCache.get(key)!;
};

// ä½¿ç”¨ç¼“å­˜
export const Button = styled.button<ButtonProps>`
  ${({ theme, variant, size }) => {
    const cacheKey = `button-${variant}-${size}-${theme.mode}`;
    return createCachedStyles(cacheKey, () =>
      createButtonStyles(theme, variant, size)
    );
  }}
`;
```

#### æ¡ä»¶æ ·å¼ä¼˜åŒ–

```typescript
// âœ… æ¨èï¼šä½¿ç”¨æ ·å¼æ˜ å°„
const variantStyles = {
  primary: css`
    background-color: #3b82f6;
  `,
  secondary: css`
    background-color: #64748b;
  `,
  success: css`
    background-color: #10b981;
  `,
  danger: css`
    background-color: #ef4444;
  `,
};

export const Button = styled.button<{ variant: keyof typeof variantStyles }>`
  ${({ variant }) => variantStyles[variant]}
`;

// âŒ é¿å…ï¼šå¤§é‡æ¡ä»¶åˆ¤æ–­
export const Button = styled.button<{ variant: string }>`
  ${({ variant }) =>
    variant === 'primary' &&
    css`
      background-color: #3b82f6;
    `}
  ${({ variant }) =>
    variant === 'secondary' &&
    css`
      background-color: #64748b;
    `}
  ${({ variant }) =>
    variant === 'success' &&
    css`
      background-color: #10b981;
    `}
  ${({ variant }) =>
    variant === 'danger' &&
    css`
      background-color: #ef4444;
    `}
`;
```

#### æ ·å¼ç»„ä»¶ä¼˜åŒ–

```typescript
// âœ… æ¨èï¼šåˆç†çš„ç»„ä»¶ç²’åº¦
export const Card = styled.div`
  /* å¡ç‰‡åŸºç¡€æ ·å¼ */

  .card-header {
    /* å¤´éƒ¨æ ·å¼ */
  }
  .card-body {
    /* å†…å®¹æ ·å¼ */
  }
  .card-footer {
    /* åº•éƒ¨æ ·å¼ */
  }
`;

// âŒ é¿å…ï¼šè¿‡åº¦ç»†åˆ†
export const CardContainer = styled.div`...`;
export const CardHeader = styled.div`...`;
export const CardBody = styled.div`...`;
export const CardFooter = styled.div`...`;
```

## æ‰©å±•å’Œå®šåˆ¶æŒ‡å—

### 1. ä¸»é¢˜æ‰©å±•

#### æ‰©å±•è®¾è®¡ä»¤ç‰Œ

```typescript
// æ‰©å±•é¢œè‰²ä»¤ç‰Œ
const customTokens = {
  ...designTokens,
  colors: {
    ...designTokens.colors,
    brand: {
      50: '#f0f9ff',
      100: '#e0f2fe',
      200: '#bae6fd',
      300: '#7dd3fc',
      400: '#38bdf8',
      500: '#0ea5e9',
      600: '#0284c7',
      700: '#0369a1',
      800: '#075985',
      900: '#0c4a6e',
    },
    accent: {
      50: '#fdf4ff',
      500: '#a855f7',
      900: '#581c87',
    },
  },
  // æ‰©å±•é—´è·ç³»ç»Ÿ
  spacing: [...designTokens.spacing, 128, 160, 192],
  // æ‰©å±•å­—ä½“å¤§å°
  typography: {
    ...designTokens.typography,
    sizes: [...designTokens.typography.sizes, 84, 96],
  },
};

// åˆ›å»ºè‡ªå®šä¹‰ä¸»é¢˜
export const createCustomTheme = (mode: 'light' | 'dark' = 'light'): Theme => ({
  tokens: customTokens,
  mode,
  isDark: mode === 'dark',
  colors: {
    background: mode === 'dark' ? customTokens.colors.neutral[900] : '#ffffff',
    surface: mode === 'dark' ? customTokens.colors.neutral[800] : '#ffffff',
    text: {
      primary:
        mode === 'dark'
          ? customTokens.colors.neutral[50]
          : customTokens.colors.neutral[900],
      secondary:
        mode === 'dark'
          ? customTokens.colors.neutral[300]
          : customTokens.colors.neutral[600],
      disabled:
        mode === 'dark'
          ? customTokens.colors.neutral[500]
          : customTokens.colors.neutral[400],
    },
    border:
      mode === 'dark'
        ? customTokens.colors.neutral[700]
        : customTokens.colors.neutral[200],
  },
});
```

#### ä¸»é¢˜åˆå¹¶å·¥å…·

```typescript
// ä¸»é¢˜åˆå¹¶å·¥å…·
export function mergeTheme(
  baseTheme: Theme,
  customTheme: DeepPartial<Theme>
): Theme {
  return {
    ...baseTheme,
    tokens: {
      ...baseTheme.tokens,
      ...customTheme.tokens,
      colors: {
        ...baseTheme.tokens.colors,
        ...customTheme.tokens?.colors,
      },
      typography: {
        ...baseTheme.tokens.typography,
        ...customTheme.tokens?.typography,
      },
    },
    colors: {
      ...baseTheme.colors,
      ...customTheme.colors,
    },
  };
}

// ä½¿ç”¨ç¤ºä¾‹
const myCustomTheme = mergeTheme(lightTheme, {
  tokens: {
    colors: {
      primary: { 500: '#ff6b6b' },
    },
  },
  colors: {
    surface: '#f8f9fa',
  },
});
```

### 2. ç»„ä»¶æ ·å¼æ‰©å±•

#### æ ·å¼ç»„ä»¶ç»§æ‰¿

```typescript
// åŸºç¡€æŒ‰é’®
export const BaseButton = styled.button`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
`;

// æ‰©å±•æŒ‰é’®æ ·å¼
export const PrimaryButton = styled(BaseButton)`
  background-color: #3b82f6;
  color: white;

  &:hover {
    background-color: #2563eb;
  }
`;

export const GradientButton = styled(BaseButton)`
  background: linear-gradient(45deg, #fe6b8b 30%, #ff8e53 90%);
  color: white;
  box-shadow: 0 3px 5px 2px rgba(255, 105, 135, 0.3);

  &:hover {
    box-shadow: 0 6px 10px 4px rgba(255, 105, 135, 0.3);
  }
`;

export const GlassButton = styled(BaseButton)`
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;

  &:hover {
    background: rgba(255, 255, 255, 0.2);
  }
`;
```

#### æ ·å¼è¦†ç›–æ¨¡å¼

```typescript
// 1. CSS prop è¦†ç›–
<Button
  variant="primary"
  css={css`
    border-radius: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
  `}
>
  Custom Style
</Button>

// 2. className è¦†ç›–
const customButtonClass = css`
  background: linear-gradient(45deg, #fe6b8b, #ff8e53);
  &:hover {
    transform: translateY(-2px);
  }
`;

<Button className={customButtonClass}>
  Gradient Button
</Button>

// 3. styled åŒ…è£…è¦†ç›–
const CustomButton = styled(Button)`
  && {
    background-color: #ff6b6b;
    border-radius: 20px;

    &:hover {
      background-color: #ff5252;
      transform: scale(1.05);
    }
  }
`;
```

#### ç»„ä»¶å˜ä½“æ‰©å±•

```typescript
// æ‰©å±•æŒ‰é’®å˜ä½“
const extendedVariantStyles = (theme: Theme) => ({
  ...variantStyles(theme),

  gradient: css`
    background: linear-gradient(
      45deg,
      ${theme.tokens.colors.primary[500]},
      ${theme.tokens.colors.secondary[500]}
    );
    color: white;
    border: none;

    &:hover:not(:disabled) {
      background: linear-gradient(
        45deg,
        ${theme.tokens.colors.primary[600]},
        ${theme.tokens.colors.secondary[600]}
      );
    }
  `,

  glass: css`
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: ${theme.colors.text.primary};

    &:hover:not(:disabled) {
      background: rgba(255, 255, 255, 0.2);
    }
  `,

  neon: css`
    background: transparent;
    border: 2px solid ${theme.tokens.colors.primary[500]};
    color: ${theme.tokens.colors.primary[500]};
    box-shadow:
      0 0 10px ${theme.tokens.colors.primary[500]}33,
      inset 0 0 10px ${theme.tokens.colors.primary[500]}33;

    &:hover:not(:disabled) {
      box-shadow:
        0 0 20px ${theme.tokens.colors.primary[500]}66,
        inset 0 0 20px ${theme.tokens.colors.primary[500]}33;
    }
  `,
});

// æ‰©å±•æŒ‰é’®ç»„ä»¶
export const ExtendedButton = styled.button<{
  variant:
    | 'primary'
    | 'secondary'
    | 'outline'
    | 'ghost'
    | 'gradient'
    | 'glass'
    | 'neon';
  size: 'sm' | 'md' | 'lg';
}>`
  ${({ theme }) => baseButtonStyles(theme)}
  ${({ theme, variant }) => extendedVariantStyles(theme)[variant]}
  ${({ theme, size }) => sizeStyles(theme)[size]}
`;
```

### 3. åŠ¨ç”»å’Œè¿‡æ¸¡æ‰©å±•

#### è‡ªå®šä¹‰åŠ¨ç”»

```typescript
// åŠ¨ç”»å…³é”®å¸§
const animations = {
  fadeIn: keyframes`
    from { opacity: 0; }
    to { opacity: 1; }
  `,

  slideInUp: keyframes`
    from { 
      transform: translateY(20px); 
      opacity: 0; 
    }
    to { 
      transform: translateY(0); 
      opacity: 1; 
    }
  `,

  bounce: keyframes`
    0%, 20%, 53%, 80%, 100% {
      transform: translate3d(0,0,0);
    }
    40%, 43% {
      transform: translate3d(0, -30px, 0);
    }
    70% {
      transform: translate3d(0, -15px, 0);
    }
    90% {
      transform: translate3d(0, -4px, 0);
    }
  `,

  pulse: keyframes`
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  `,

  shake: keyframes`
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
    20%, 40%, 60%, 80% { transform: translateX(10px); }
  `,
};

// åŠ¨ç”»ç»„ä»¶
export const AnimatedCard = styled.div<{
  animation?: keyof typeof animations;
  duration?: string;
  delay?: string;
}>`
  ${({ animation, duration = '0.3s', delay = '0s' }) =>
    animation &&
    css`
      animation: ${animations[animation]} ${duration} ease-out ${delay} both;
    `}
`;

// äº¤äº’åŠ¨ç”»æ··å…¥
export const interactionAnimations = {
  hover: (theme: Theme) => css`
    transition: all ${theme.tokens.transitions.fast};

    &:hover {
      transform: translateY(-2px);
      box-shadow: ${theme.tokens.shadows.lg};
    }
  `,

  press: css`
    &:active {
      transform: scale(0.98);
    }
  `,

  focus: (theme: Theme) => css`
    &:focus-visible {
      outline: 2px solid ${theme.tokens.colors.primary[500]};
      outline-offset: 2px;
      animation: ${pulse} 0.3s ease-out;
    }
  `,
};
```

### 4. å“åº”å¼è®¾è®¡æ‰©å±•

#### å“åº”å¼æ–­ç‚¹ç³»ç»Ÿ

```typescript
// æ‰©å±•æ–­ç‚¹ç³»ç»Ÿ
const breakpoints = {
  xs: '320px',
  sm: '640px',
  md: '768px',
  lg: '1024px',
  xl: '1280px',
  '2xl': '1536px',
};

// åª’ä½“æŸ¥è¯¢å·¥å…·
export const media = {
  xs: `@media (min-width: ${breakpoints.xs})`,
  sm: `@media (min-width: ${breakpoints.sm})`,
  md: `@media (min-width: ${breakpoints.md})`,
  lg: `@media (min-width: ${breakpoints.lg})`,
  xl: `@media (min-width: ${breakpoints.xl})`,
  '2xl': `@media (min-width: ${breakpoints['2xl']})`,

  // èŒƒå›´æŸ¥è¯¢
  between: (min: keyof typeof breakpoints, max: keyof typeof breakpoints) =>
    `@media (min-width: ${breakpoints[min]}) and (max-width: ${breakpoints[max]})`,

  // æœ€å¤§å®½åº¦æŸ¥è¯¢
  down: (breakpoint: keyof typeof breakpoints) =>
    `@media (max-width: ${breakpoints[breakpoint]})`,
};

// å“åº”å¼ç»„ä»¶ç¤ºä¾‹
export const ResponsiveGrid = styled.div`
  display: grid;
  gap: 16px;
  grid-template-columns: 1fr;

  ${media.sm} {
    grid-template-columns: repeat(2, 1fr);
  }

  ${media.md} {
    grid-template-columns: repeat(3, 1fr);
  }

  ${media.lg} {
    grid-template-columns: repeat(4, 1fr);
  }
`;

export const ResponsiveButton = styled.button`
  padding: 8px 16px;
  font-size: 14px;

  ${media.sm} {
    padding: 12px 24px;
    font-size: 16px;
  }

  ${media.lg} {
    padding: 16px 32px;
    font-size: 18px;
  }
`;
```

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. æ ·å¼è®¡ç®—ä¼˜åŒ–

#### æ ·å¼ç¼“å­˜ç­–ç•¥

```typescript
// å…¨å±€æ ·å¼ç¼“å­˜
const globalStyleCache = new Map<string, SerializedStyles>();

export const getCachedStyles = (
  key: string,
  factory: () => SerializedStyles
): SerializedStyles => {
  if (!globalStyleCache.has(key)) {
    globalStyleCache.set(key, factory());
  }
  return globalStyleCache.get(key)!;
};

// ä¸»é¢˜ç›¸å…³æ ·å¼ç¼“å­˜
const themeStyleCache = new WeakMap<Theme, Map<string, SerializedStyles>>();

export const getCachedThemeStyles = (
  theme: Theme,
  key: string,
  factory: (theme: Theme) => SerializedStyles
): SerializedStyles => {
  if (!themeStyleCache.has(theme)) {
    themeStyleCache.set(theme, new Map());
  }

  const cache = themeStyleCache.get(theme)!;
  if (!cache.has(key)) {
    cache.set(key, factory(theme));
  }

  return cache.get(key)!;
};
```

#### æ¡ä»¶æ ·å¼ä¼˜åŒ–

```typescript
// é¢„è®¡ç®—æ ·å¼å˜ä½“
const precomputedVariants = (theme: Theme) => ({
  primary: css`
    background-color: ${theme.tokens.colors.primary[500]};
    color: white;
  `,
  secondary: css`
    background-color: ${theme.tokens.colors.secondary[500]};
    color: white;
  `,
  success: css`
    background-color: ${theme.tokens.colors.semantic.success};
    color: white;
  `,
});

// ä½¿ç”¨é¢„è®¡ç®—æ ·å¼
export const OptimizedButton = styled.button<{
  variant: 'primary' | 'secondary' | 'success';
}>`
  ${({ theme, variant }) => {
    const variants = getCachedThemeStyles(
      theme,
      'button-variants',
      precomputedVariants
    );
    return variants[variant];
  }}
`;
```

### 2. æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–

#### æ ·å¼ç»„ä»¶ä¼˜åŒ–

```typescript
// âœ… æ¨èï¼šåˆç†çš„ç»„ä»¶ç²’åº¦
export const Card = styled.div`
  background-color: ${({ theme }) => theme.colors.surface};
  border-radius: ${({ theme }) => theme.tokens.radii.lg}px;
  padding: ${({ theme }) => theme.tokens.spacing[6]}px;

  .card-header {
    margin-bottom: ${({ theme }) => theme.tokens.spacing[4]}px;
    font-weight: ${({ theme }) => theme.tokens.typography.weights.semibold};
  }

  .card-body {
    color: ${({ theme }) => theme.colors.text.primary};
    line-height: ${({ theme }) => theme.tokens.typography.lineHeights.relaxed};
  }

  .card-footer {
    margin-top: ${({ theme }) => theme.tokens.spacing[4]}px;
    padding-top: ${({ theme }) => theme.tokens.spacing[4]}px;
    border-top: 1px solid ${({ theme }) => theme.colors.border};
  }
`;

// âŒ é¿å…ï¼šè¿‡åº¦ç»†åˆ†çš„ç»„ä»¶
export const CardContainer = styled.div`...`;
export const CardHeader = styled.div`...`;
export const CardBody = styled.div`...`;
export const CardFooter = styled.div`...`;
```

#### åŠ¨æ€æ ·å¼ä¼˜åŒ–

```typescript
// âœ… æ¨èï¼šä½¿ç”¨CSSå˜é‡è¿›è¡ŒåŠ¨æ€æ ·å¼
export const ProgressBar = styled.div<{ progress: number }>`
  --progress: ${({ progress }) => progress}%;

  width: 100%;
  height: 8px;
  background-color: ${({ theme }) => theme.colors.border};
  border-radius: ${({ theme }) => theme.tokens.radii.full}px;
  overflow: hidden;

  &::after {
    content: '';
    display: block;
    width: var(--progress);
    height: 100%;
    background-color: ${({ theme }) => theme.tokens.colors.primary[500]};
    transition: width 0.3s ease;
  }
`;

// âŒ é¿å…ï¼šé¢‘ç¹çš„æ ·å¼é‡è®¡ç®—
export const ProgressBar = styled.div<{ progress: number }>`
  ${({ progress, theme }) => css`
    width: 100%;
    height: 8px;
    background: linear-gradient(
      to right,
      ${theme.tokens.colors.primary[500]} ${progress}%,
      ${theme.colors.border} ${progress}%
    );
  `}
`;
```

## æ€»ç»“

Flexi-UI çš„æ ·å¼ç³»ç»Ÿå±•ç°äº†ç°ä»£ CSS-in-JS æ¶æ„çš„ä¼˜åŠ¿å’Œå¤æ‚æ€§ï¼š

### ä¸»è¦ä¼˜åŠ¿

1. **å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿ**: åŸºäºè®¾è®¡ä»¤ç‰Œçš„ä¸€è‡´æ€§è®¾è®¡
2. **å¼ºå¤§çš„ä¸»é¢˜æ”¯æŒ**: å®Œæ•´çš„æ˜æš—ä¸»é¢˜åˆ‡æ¢èƒ½åŠ›
3. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
4. **é«˜åº¦å¯å®šåˆ¶**: ä¸°å¯Œçš„å˜ä½“å’Œæ‰©å±•èƒ½åŠ›

### æŠ€æœ¯ç‰¹ç‚¹

1. **Emotion CSS-in-JS**: æä¾›åŠ¨æ€æ ·å¼å’Œä¸»é¢˜æ„ŸçŸ¥èƒ½åŠ›
2. **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªç»„ä»¶éƒ½æœ‰ç‹¬ç«‹çš„æ ·å¼æ¨¡å—
3. **æ€§èƒ½è€ƒè™‘**: æ ·å¼ç¼“å­˜å’Œä¼˜åŒ–ç­–ç•¥
4. **å¯è®¿é—®æ€§**: å®Œæ•´çš„ç„¦ç‚¹ç®¡ç†å’Œé”®ç›˜å¯¼èˆªæ”¯æŒ

### æ‰©å±•å»ºè®®

1. **ç»Ÿä¸€æ ·å¼æ¶æ„**: å‡å°‘æŠ€æœ¯æ ˆå¤æ‚åº¦
2. **ä¼˜åŒ–æ€§èƒ½**: æ”¹å–„æ ·å¼è®¡ç®—å’Œç¼“å­˜æœºåˆ¶
3. **å¢å¼ºå“åº”å¼**: å®Œå–„ç§»åŠ¨ç«¯å’Œå“åº”å¼æ”¯æŒ
4. **æ”¹å–„å¼€å‘ä½“éªŒ**: æä¾›æ›´å¥½çš„è°ƒè¯•å’Œæ–‡æ¡£å·¥å…·

é€šè¿‡åˆç†ä½¿ç”¨è¿™äº›æ ·å¼æ¨¡å¼å’Œæœ€ä½³å®è·µï¼Œå¼€å‘è€…å¯ä»¥æ„å»ºå‡ºæ—¢ç¾è§‚åˆé«˜æ€§èƒ½çš„ç”¨æˆ·ç•Œé¢ç»„ä»¶ã€‚
